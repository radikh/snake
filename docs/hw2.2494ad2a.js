var e,t=globalThis,i={},s={},h=t.parcelRequire46ba;null==h&&((h=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var h={id:e,exports:{}};return i[e]=h,t.call(h.exports,h,h.exports),h.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){s[e]=t},t.parcelRequire46ba=h),h.register;var o=h("6qqMG");const r=document.getElementById("gameCanvas"),a=r.getContext("2d");let l=(0,o.getDefaultLanguage)(),n=o.languages[l];function c(){document.querySelectorAll(".language-btn").forEach(e=>{e.dataset.lang===l?e.classList.add("active"):e.classList.remove("active")}),document.title=n.title,document.querySelectorAll("[data-i18n]").forEach(e=>{let t=e.getAttribute("data-i18n");n[t]&&(e.textContent=n[t])})}var d=((e=d||{})[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right",e);class g{constructor(){this.body=[{x:10,y:10},{x:9,y:10},{x:8,y:10},{x:7,y:10}],this.direction=3}move(){let e={...this.body[0]};switch(this.direction){case 0:e.y--,e.y<0&&(e.y=19);break;case 1:e.y++,e.y>=20&&(e.y=0);break;case 2:e.x--,e.x<0&&(e.x=19);break;case 3:e.x++,e.x>=20&&(e.x=0)}return this.body.unshift(e),!1}grow(){}checkCollision(){let e=this.body[0];for(let t=1;t<this.body.length;t++)if(e.x===this.body[t].x&&e.y===this.body[t].y)return!0;return!1}draw(){a&&this.body.forEach((e,t)=>{0===t?a.fillStyle="#228B22":a.fillStyle="#32CD32",a.fillRect(20*e.x,20*e.y,18,18)})}}class f{constructor(){this.x=0,this.y=0,this.randomize()}randomize(){this.x=Math.floor(20*Math.random()),this.y=Math.floor(20*Math.random())}draw(){a&&(a.fillStyle="#FF0000",a.fillRect(20*this.x,20*this.y,18,18))}}class p extends f{constructor(){super(),this.isActive=!1,this.timer=0,this.points=0,this.size=2}activate(){this.isActive=!0,this.randomize(),this.points=3+Math.floor(4*Math.random()),this.timer=12e3}deactivate(){this.isActive=!1,this.timer=0}update(e){this.isActive&&(this.timer-=e,this.timer<=0&&this.deactivate())}randomize(){this.x=Math.floor(Math.random()*(20-this.size+1)),this.y=Math.floor(Math.random()*(20-this.size+1))}draw(){a&&this.isActive&&(a.fillStyle="#FF3333",a.fillRect(20*this.x,20*this.y,20*this.size-2,20*this.size-2),a.fillStyle="#FF6666",a.fillRect(20*this.x+5,20*this.y+5,10,10),a.fillStyle="#FFFFFF",a.font="16px Arial",a.textAlign="center",a.fillText(`${this.points}`,20*this.x+20*this.size/2,20*this.y+20*this.size/2+5))}checkCollision(e,t){return!!this.isActive&&e>=this.x&&e<this.x+this.size&&t>=this.y&&t<this.y+this.size}}class m{constructor(){this.snake=new g,this.food=new f,this.bigFood=new p,this.score=0,this.gameOver=!1,this.normalSpeed=200,this.fastSpeed=120,this.speed=this.normalSpeed,this.longPressTimer=null,this.minSpeed=50,this.highScores=this.loadHighScores(),this.isNewHighScore=!1,this.playerName="Player 1",this.isEnteringName=!1,this.foodEatenCount=0,this.lastUpdateTime=Date.now(),this.setupEventListeners(),this.updateHighScoresDisplay()}setupEventListeners(){document.addEventListener("keydown",e=>{let{direction:t}=this.snake,i=null;switch(e.key){case"ArrowUp":1!==t&&(i=0);break;case"ArrowDown":0!==t&&(i=1);break;case"ArrowLeft":3!==t&&(i=2);break;case"ArrowRight":2!==t&&(i=3)}null!==i&&null===this.longPressTimer&&(this.snake.direction=i,this.longPressTimer=window.setTimeout(()=>{this.speed=this.fastSpeed},200))}),document.addEventListener("keyup",e=>{["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&(null!==this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null),this.speed=this.normalSpeed)}),document.addEventListener("keydown",e=>{this.isEnteringName&&("Enter"===e.key?this.saveHighScore():"Backspace"===e.key?this.playerName=this.playerName.slice(0,-1):1===e.key.length&&this.playerName.length<10&&(this.playerName+=e.key),e.preventDefault())})}update(){if(this.gameOver)return;let e=Date.now(),t=e-this.lastUpdateTime;this.lastUpdateTime=e,this.bigFood.update(t),this.snake.move();let i=this.snake.body[0];if(i.x===this.food.x&&i.y===this.food.y)this.score++,this.foodEatenCount++,this.foodEatenCount>=6&&(this.foodEatenCount=0,this.bigFood.activate()),this.score%1==0&&(this.normalSpeed=Math.max(this.normalSpeed-10,this.minSpeed),this.fastSpeed=Math.max(this.fastSpeed-10,this.minSpeed/2),this.speed===this.fastSpeed+10?this.speed=this.fastSpeed:this.speed=this.normalSpeed),this.food.randomize(),this.snake.grow();else if(this.bigFood.isActive&&this.bigFood.checkCollision(i.x,i.y)){this.score+=this.bigFood.points,this.bigFood.deactivate();for(let e=0;e<this.bigFood.points;e++)this.snake.grow()}else this.snake.body.pop();this.snake.checkCollision()&&(this.gameOver=!0,this.checkHighScore())}loadHighScores(){let e=localStorage.getItem("snakeHighScores");return e?JSON.parse(e):[]}saveHighScores(){localStorage.setItem("snakeHighScores",JSON.stringify(this.highScores))}checkHighScore(){0!==this.score&&(this.highScores.length<5||this.score>this.highScores[this.highScores.length-1].score)&&(this.isNewHighScore=!0,this.isEnteringName=!0)}saveHighScore(){let e={name:this.playerName||"Anonymous",score:this.score,date:new Date().toLocaleDateString()};this.highScores.push(e),this.highScores.sort((e,t)=>t.score-e.score),this.highScores=this.highScores.slice(0,5),this.saveHighScores(),this.isEnteringName=!1,this.updateHighScoresDisplay()}updateHighScoresDisplay(){let e=document.getElementById("high-scores-list");if(e)if(e.innerHTML="",0===this.highScores.length){let t=document.createElement("div");t.className="no-scores",t.textContent=n.noScoresYet,e.appendChild(t)}else this.highScores.slice(0,5).forEach((t,i)=>{let s=document.createElement("div");s.className="score-entry";let h=document.createElement("div");h.innerHTML=`${i+1}. <span class="name">${t.name}</span>`;let o=document.createElement("span");o.className="score",o.textContent=`${t.score}`;let r=document.createElement("div");r.className="date",r.textContent=t.date,s.appendChild(h),s.appendChild(o),s.appendChild(r),e.appendChild(s)})}drawHighScores(){if(!a)return;a.fillStyle="#ffffff",a.font="24px Arial",a.textAlign="center";let e=r.width/2,t=r.height/2-60;a.fillText("HIGH SCORES",e,t),t+=30,a.font="16px Arial",0===this.highScores.length?a.fillText("No high scores yet!",e,t+20):this.highScores.forEach((i,s)=>{a.fillText(`${s+1}. ${i.name}: ${i.score} (${i.date})`,e,t+25*s)})}draw(){if(a){if(a.fillStyle="#000000",a.fillRect(0,0,r.width,r.height),this.gameOver){a.fillStyle="#ffffff",a.font="30px Arial",a.textAlign="center";let e=r.width/2,t=r.height/5;if(a.fillText(n.gameOver,e,t),a.font="20px Arial",a.fillText(`${n.finalScore}: ${this.score}`,e,t+20),this.isEnteringName)a.fillText(n.newHighScore,e,t+100),a.fillText(this.playerName+"_",e,t+140);else{a.font="24px Arial";let i=t+80;a.fillText(n.highScores,e,i),a.font="16px Arial",0===this.highScores.length?a.fillText(n.noHighScores,e,i+40):this.highScores.slice(0,5).forEach((t,s)=>{a.fillText(`${s+1}. ${t.name}: ${t.score} (${t.date})`,e,i+40+35*s)}),a.fillStyle="#90EE90",a.font="18px Arial",a.fillText(n.pressSpace,e,r.height-20)}}else if(this.snake.draw(),this.food.draw(),this.bigFood.draw(),a.fillStyle="#ffffff",a.font="20px Arial",a.textAlign="left",a.fillText(`${n.score}: ${this.score}`,10,30),this.bigFood.isActive){let e=Math.ceil(this.bigFood.timer/1e3);a.fillStyle="#FF6666",a.textAlign="right",a.fillText(`${n.bigAppleTimer}: ${e}s`,r.width-10,30)}}}}let y=new m;document.addEventListener("keydown",e=>{"Space"===e.code&&y.gameOver&&(y=new m)}),window.onload=()=>{c(),document.querySelectorAll(".language-btn").forEach(e=>{e.addEventListener("click",e=>{let t=e.target.dataset.lang;t&&t!==l&&(l=t,n=o.languages[l],(0,o.setLanguagePreference)(l),c(),y&&y.updateHighScoresDisplay())})}),function e(){y.update(),y.draw(),setTimeout(e,y.speed)}(),y.updateHighScoresDisplay()};
//# sourceMappingURL=hw2.2494ad2a.js.map
